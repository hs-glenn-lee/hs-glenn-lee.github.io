---
layout: post
title:  "역할, 책임, 협력"
author: "이희수"
---


객체 세게에서는 협력이라는 문맥이 객체의 행동방식을 결정한다. 중요한 것은 개별 객체가 아니라 객첻르 사이에 이뤄지는 협력이다. 협력이 자리를 잡으면, 저절로 객체의 행동이 드러나고 뒤이어 적절한 객체의 상태가 결정된다.

## 협력

#### 요청하고 응답하며 협력하는 사람들

**협력**은 한 사람이 다른 사람에게 도움을 **요청**할 때 시작된다. 자신에게 할당된 일을 처리하던 중에 스스로 해결하기 어려운 문제에 부딪히게 되면, 문제해결에 필요한 도움을 받을 수 있는 누군가에게 도움을 요청한다. 요청을 받은 사람은 요청한 사람에게 필요한 지식을 알려주거나 서비스를 제공한다. 여기서 요청을 받은 사람 역시 자신에게 주어진 일을 처리하던 중에 다른 사람의 도움이 필요한 경우가 있다. 결과적으로 협력은 다수의 요청과 응답으로 구성되며, 전체적으로 협력은 다수의 연쇄적인 요청과 응답의 흐름으로 구성된다.


#### 누가 파이를 훔쳤지

![하트 잭 재판 속의 협력]({{site.url}}/assets/post_images/RRC1.png )

이야기에 등장하는 객체들은 잭의 재판이라는 공동의 목적을 달성하기 위해 협력하고 있다.

- 누군가가 왕에게 재판을 요청한다. (1.)
- 왕은 토끼에게 증인을 부를 것을 요청한다. (2.)
- 왕의 요청을 받은 토끼는 모자 장수에게 증인석으로 입장할 것을 요청한다. (3.)
- 모자 장수의 입장은 왕이 토끼에게 요청했던 증인 호출에 대한 응답이기도 하다.
- 이제 왕은 모자 장수에게 증언할 것을 요청한다. (4.)
- 모자 장수는 자신이 알고 있는 내용을 증언함으로써 왕의 요청에 응답한다.

등장인물이 서로에게 요청하고 응답하며 협력하고 있다. 여러 요청과 응답의 연쇄가 재판과정을 구성하고 있다.

그런데 이야기에서 요청과 응답을 자세히 살펴 보면,

- 왕은 재판을 수행할 의무가 있고, 재판에 필요한 지식을 알고 있다. 
- 왕이 토끼에게 목격자를 불러오라고 요청한 이유는 왕은 토끼가 목격자에 대해 알고 있으며 동시에 목격자를 부를 의무가 있기 때문이다.
- 왕이 모자장수에게 증언하라고 요청한 이유는 모자 장수가 사건에 대해 알고 있으며 증언할 의무가 있기 때문이다.

결국 등장인물들이 특정한 요청을 받아들일 수 있는 이유는 그 요청에 대해 적절한 지식과 행동 방식을 갖고 있기 때문이다. 요청과 응답은 협력에 참여하는 객체가 수행해야할 책임을 정의한다.

### 책임

객체지향 세계에서는 객체가 어떤 요청에 대해 대답해 줄 수 있거나, 적절한 행동을 할 의무가 있는 경우 해당 객체가 **책임**을 가진다고 말한다.

앞선 이야기에서 왕은 '재판을 수행하라'는 요청에 응답해야 하므로 '재판을 수행할' 의무가 있고, 토끼는 '목격자를 불러오라'는 요청에 적절히 응답해야 하므로 '목격자를 불러올' 책임을 지고 있다.

<u>결국 어떤 대상에 대한 요청은 그 대상이 요청을 처리할 책임이 있음을 암시한다.</u>

<span style="color:#eee">'객체지향 개발에서 가장 중요한 능력은 책임을 능숙하게 소프트웨어 객체에 할당하는 것'[Larman 2004]. 책임을 어떻게 구현할 것인가 하는 문제는 객체와 책임이 제자리를 잡은 후에 고려해도 늦지 않다.</span>

#### 책임의 분류

협력에 참여하는 객체들은 목표를 달성하는 데 


