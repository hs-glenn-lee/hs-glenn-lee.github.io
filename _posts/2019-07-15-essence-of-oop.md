---
layout: post
title:  "객체지향의 사실과 오해 요약"
author: "이희수"
---

### 초반부는 나중에 ..

# 이상한 나라의 객체

## 지루함 실험

* 엘리자베스 스펠크와 필립 켈만의 실험

* 동일한 모멘텀으로 움직이는 두 막대가 있다. 다른 모멘텀으로 움직이는 하나의 막대가 실험 변수. 아기는 두 동일하게 움직이는 두 막대를 하나의 객체로 인식하고 쉽게 지루함을 나타냈다. 하지만 따로 움직이는 다른 하나의 막대가 있는 경우 좀 더 오래 집중했다.

* 사람은 태어난 지 얼마 안 된 시기부터 뚜렷한 경계를 가지고 함께 행동하는 물체를 하나의 개념으로 인지한다는 사실을 알 수 있다. 아기들은 물체가 여러 부분으로 구성돼있더라도 함께 움직일 경우 그 물체를 하나의 유기적인 단위로 인식한다. 아기들 역시 뚜렷한 경계를 가진 객체들의 집합으로 세상을 바라보는 것이다.

## 객체지향과 인지 능력

* 위의 실험은 인간이 선천적으로 타고난 인지 능력을 이용해 세상에 존재하는 다양한 객체를 식별하고 분류함으로써 세상을 이해한다는 사실을 보여준다.

* 객체지향이 직관적이고 이해하기 쉬운 것은 세상을 자율적이고 독립적인 객체들로 분해할 수 있는 사람의 기본적인 인지 능력에 기반을 두고 있기 때문이다.

## 객체, 그리고 소프트웨어 나라

* 객체의 특성을 효과적으로 설명하기 위해서는 객체를 **상태, 행동, 식별자**를 지닌 실체로 보는 것이 가장 효과적이다.

### 상태

* 왜 상태가 필요한가. 시간에 따라 변화하는 복잡한 객체. 상태를 이용하면 과거의 모든 행동 이력을 설명하지 않고도 행동의 결과를 쉽게 예측하고 설명할 수 있다. 세상의 복잡성을 완화하고 인지 과부하를 줄일 수 있는 중요한 개념이다.

### 상태와 프로퍼티

* 숫자, 문자열 같은 단순한 값들은 객체가 아니다. 값은 독립적인 의미를 가지기 보다, 객체의 특징을 표현하는 데 사용된다.

* 객체를 사용해 다른 객체의 상태를 표현해야 할 경우가 있다. 객체를 "연결"해 이를 표현한다.

* 객체의 상태
```
상태는 특정 시점에 객체가 가지고 있는 정보의 집합으로 객체의 구조적 특징을 포현한다. 객체의 상태는 객체에 존재하는 정적인 프로퍼티와 동적인 프로퍼티 값으로 구성된다. 객체의 프로퍼티는 단순한 값과 다른 객체를 참조하는 링크로 구분할 수 있다.
```

* 객체는 자율적인 존재. 객체지향의 세계에서 객체는 다른 객체의 상태에 직접적으로 접근할 수도, 상태를 변경할 수도 없다. 자율적인 객체는 스스로 자신의 상태를 책임져야 한다.

### 행동

* 객체의 상태는 저절로 변경되지 않는다. 객체의 상태를 변경하는 것은 객체의 자립적인 행동뿐이다.


* 행동
```
행동이란 외부의 요청 또는 수신된 메세지에 응답하기 위해 동작하고 반응하는 활동이다. 행동의 결과로 객체는 자신의 상태를 변경하거나 다른 객체에게 메세지를 전달할 수 있다. 객체는 행동을 통해 다른 객체와의 협력에 참여하므로 행동은 외부에 가시적이어야 한다.
```

### 상태 캡슐화

* 현실 세계와 객체지향 세계의 객체 사이에는 중요한 차이점이 있다. 현실 속에서 앨리스는 스스로 음료를 마시는 능동적인 존재지만 음료는 스스로 아무것도 할 수 없는 수동적인 존재다.
<br>그러나 객체지향의 세계에서 모든 객체는 자신의 상태를 스스로 관리하는 자율적인 존재다. 앨리스 객체의 키를 작게 만드는 것이 앨리스 자신인 것처럼 음료 객체의 양을 줄이는 것은 음료 자신이어야 한다.
<br> 앨리스가 음료를 마시는 행동은 앨리스 자신의 키를 작게만든다. 따라서 앨리스 자신의 상태를 변경한다. 이 과정에서 앨리스는 자신이 먹은 양만큼 음료양을 줄여달라고 메세지를 전송한다. 적절한 정도로 음료의 양을 줄이는 것은 메세지를 전달받은 음료 스스로의 몫이다.

* 상태를 외부에 노출시키지 않고 행동을 경계로 캡슐화하는 것은 결과적으로 객체의 자율성을 높인다. 자율적인 객체는 스스로 판단하고 스스로 결정하기 때문에 객체의 자율성이 높아질수록 객체의 지능도 높아진다. 협력에 참여하는 객체들의 지능이 높아질 수록 협력은 유연하고 간결해진다.

### 식별자

* 객체란 인간의 인지 능력을 이용해 식별 가능한 경계를 가진 모든 사물을 의미한다. 객체가 식별 가능하다는 것은 객체를 서로 구별할 수 있는 특정한 프로퍼티가 객체 안에 존재한다는 것을 의미한다. 이를 식별자라고 한다.

* 값과 객체가 다른 것은 식별자의 유무다. Integer 6은 다른 Integer 6과 동등(equal)하다. 값의 상태는 변하지 않는다.

* 객체는 시간에 따라 변경되는 상태를 포함한다. 타입이 같은 두 객체의 상태가 완전히 똑같더라도 두 객체는 독립적인 별개의 객체로 다뤄줘야 한다. 이름이 엘리스이고 키가 동일한 두 사람이 함께 있다고 하더라도 어떤 누구도 두 사람을 같은 사람이라고 생각하지 않는다. 상태는 동일하지만 두 사람은 온전히 별개의 인격체다.

* 식별자란
```
식별자란 어떤 객체를 다른 객체와 구분하는 데 사용하는 객체의 프로퍼티다. 값은 식별자를 가지지 않기 때문에 상태를 이용한 동등성 검사를 통해 두 인스턴스를 비교해야한다. 객체는 상태가 변경될 수 있기 때문에 식별자를 이용한 동일성 검사를 토앻 두 인스턴스를 비교할 수 있다.
```

* 객체와 값의 차이점을 혼란스러워하는데, 대부분의 객체지향 프로그래밍 언어에서 두 개념 모두 클래스를 이용해 구현되기 때문이다. 이런 오해를 줄이기 위해 객체와 값을 지칭하는 별도의 용어를 사용하기도 한다. **참조 객체(reference object)**, 또는 **엔티티(entity)**는 식별자를 지닌 전통적인 의미의 객체를 가리키는 용어다. **값 객체(value object)**는 식별자를 가지지 않는 값을 가리키는 용어다.

* -
    * 객체는 상태를 가지며 상태는 변경 가능하다.
    * 객체의 상태를 변경시키는 것은 객체의 행동이다.
        * 행동의 결과는 상태에 의존적이며 상태를 이용해 서술할 수 있다.
        * 행동의 순서가 실행결과에 영향을 미친다.
    * 객체는 어떤 상태에 있더라도 유일하게 식별 가능하다.

## 기계로서의 객체

* "협력하는 엘리스 기계와 음료 기계" 사진

## 행동이 상태를 결정한다.

* 객체지향에 갓 입문한 사람들이 가장 쉽게 빠지는 함정은 상태를 중심으로 객체를 바라보는 것이다.

* 안타깝게도 상태를 먼저  결정하고 행동을 나중에 결정하는 방법은 설계에 나쁜 영향을 끼친다.
    1. 상태를 먼저 결정할 경우 캡슐화가 저해된다. 공용 인터페이스에 상태가 노출되버릴 확률이 높아진다.
    2. 객체를 협력자가 아닌 고립된 섬으로 만든다. 객체가 필요한 이유는 앱의 문맥 내에서 다른 객체와 협력하기 위해서다. 상태를 먼저 고려하는 것은 협력이라는 문맥에서 멀린 벗어난 채 객체를 설게하게 한다.
    3. 객체의 재사용성이 저하된다.

* 객치지향 설계는 어플리케이션에 필요한 협력을 생각하고 협력에 참여하는 데 필요한 행동을 생각한 후 행동을 수행할 객체를 선택하는 방식으로 수행된다.

* 협력 안에서 객체의 행동은 결국 객체가 협력에 참여하면서 완수해야 하는 책임을 의미한다. 따라서 어떤 책임이 필요한 가를 결정하는 과정이 전체 설계를 주도해야 한다. 책임-주도 설계

## 은유와 객체

### 의인화

* 현실 속에서는 수동적인 존재가 소프트웨어 객체로 구현될 떄는 능동적으로 변한다.

* 현실의 객체보다 더 많은 일을 할 수 있는 소프트웨어 객체의 특징을 의인화(anthropomorphism)라고 부른다. <br>"일상적인 체계에서는 어떤 사건이 일어나기 위해 반드시 인간 에이전트가 필요한 반면 객체들은 그들 자신의 체계 안에서 능동적이고 자율적인 에이전트다."

### 은유

* 객체지향 분석/설계에 대한 전통적인 조언은 현실 세계의 객체를 자세히 관찰하고 그 중에서 소프트웨어 객체에 적합한 속성만을 추려내라는 것이다. 안타깝게도 이 조언은 소프트웨어를 개발하는 데 실제적인 도움을 주지 못한다. 오히려 객체지향 어플리케이션이 현실의 구조를 정확하게 반영해야 한다는 오해만 심어줄 뿐이다.

* 그렇다면 객체지향의 세계와 현실 세계 사이에는 전혀 상관이 없는  것인가? 그렇지는 않다... TODO page.69
